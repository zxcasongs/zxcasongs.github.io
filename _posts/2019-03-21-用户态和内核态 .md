---
layout:     post                    # 使用的布局（不需要改）
title:    用户态和内核态           # 标题 
subtitle:   Hello World, Hello Blog  #副标题
date:       2019-04-17              # 时间
author:    chen                     # 作者
header-img: img/post-bg-map.jpg   #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - linux
---
![image](/img/neihe.png)

> 如上图所示，从宏观上来看，Linux操作系统的体系架构分为用户态和内核态（或者用户空间和内核）。

![image](/img/neihe2.png)

> 内核从本质上看是一种软件——控制计算机的硬件资源，并提供上层应用程序运行的环境。

> 内核态：控制计算机的硬件资源，并提供上层应用程序运行的环境。


> 用户态即上层应用程序的活动空间，应用程序的执行必须依托于内核提供的资源，包括CPU资源、存储资源、I/O资源等。为了使上层应用能够访问到这些资源，内核必须为上层应用提供访问的接口：即系统调用。


---
###### 系统调用是操作系统的最小功能单位
- 如果将系统调用比作是一个“比画”，那么上层应用就是一个“汉字”。如果完成一个“汉字”，就需要通过多个系统调用。

- 系统调用与公用函数库的关系：
- 公用函数库实现对系统调用的封装，将简单的业务逻辑接口呈现给用户，方便用户调用，从这个角度上看，库函数就像是组成汉字的“偏旁”。


###### 从特权级来区分内核态和用户态


> 在CPU的所有指令中，有一些指令是非常危险的，如果错用，将导致整个系统崩溃。所以，CPU将指令分为特权指令和非特权指令，对于那些危险的指令，只允许操作系统及其相关模块使用，普通的应用程序只能使用那些不会造成灾难的指令。

> intel cpu提供Ring0-Ring3四种级别的运行模式，Ring0级别最高，Ring3最低。Linux使用了Ring3级别运行用户态，Ring0作为 内核态。